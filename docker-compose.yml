services:
  music-dl:
    # 直接拉取最新镜像，实现快速部署
    image: guohuiyuan/go-music-dl:latest
    container_name: music-dl
    restart: unless-stopped
    ports:
      - "8080:8080"
    volumes:
      - music_data_downloads:/home/appuser/downloads
      - music_data_cookies:/home/appuser/cookies.json
      - music_data_favorites:/home/appuser/favorites.db
    environment:
      - TZ=Asia/Shanghai
    # 确保以 appuser (uid=1000) 身份运行，配合宿主机权限设置
    user: "1000:1000"

# 声明命名卷
volumes:
  music_data_downloads:
  music_data_cookies:
  music_data_favorites: